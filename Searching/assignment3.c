#include <stdlib.h>

int data[] = {
 101,30,78,57,81,68,32,44,16,28,16,
 78,4,99,82,42,14,97,83,62,63,
 5,42,53,71,67,31,28,81,66,27,
 60,87,42,10,18,86,22,99,17,26,
 55,66,78,27,53,45,90,27,71,86,
 42,94,90,29,8,72,79,50,76,7,
 38,17,99,66,29,19,30,32,68,30,
 88,28,58,77,12,88,36,81,73,90,
 60,82,37,58,91,81,6,42,53,87,
 23,34,1,59,68,5,53,6,53,16,
 67,46,8,81,28,70,45,57,3,86,
 97,87,35,99,59,1,46,55,97,89,
 85,16,63,96,26,63,60,62,92,1,
 62,45,55,38,17,97,15,8,7,62,
 37,41,50,1,90,76,27,10,73,32,
 92,72,74,95,63,85,31,87,5,98,
 92,15,6,32,13,36,67,54,83,92,
 68,39,70,47,45,36,21,91,67,5,
 99,92,49,92,56,50,23,54,50,29,
 84,5,46,58,8,42,46,32,10,34,
 31,49,8,33,19,13,29,66,91,42,
 20,92,29,88,9,1,69,93,43,39,
 11,67,9,12,53,7,38,85,61,17,
 70,22,12,94,13,70,66,78,6,73,
 76,44,83,85,72,52,89,26,59,77,
 63,5,26,76,10,57,66,0,66,74,
 1,17,85,67,20,29,21,60,20,37,
 32,26,31,22,26,47,6,58,69,98,
 98,50,77,98,22,28,7,89,43,49,
 0,70,71,33,48,18,91,65,87,22,102
};

#define PROCESSORS 50

void unique(int dt[], int sz) {
    int sb = myid - 1;       /* element index = process id - 1 */
    if (sb >= sz) return;    

    int val = dt[sb];
    int j, count = 0;

    for (j = 0; j < sz; j++) {
        if (j != sb && dt[j] == val) {
            count++;
            break;
        }
    }

    if (count == 0) {
        cout << "element " << val << " is unique" << endl;
    }

    int delay, t = 0;
    for (delay = 0; delay < 500; delay++) {
        t += delay % 2;
    }
}

int main() {
    int sz = sizeof(data);
    int i, j;

    cout.precision(3);

    for (i = 0; i < sz; i += PROCESSORS) {
        /* launch up to 50 processes */
        for (j = 0; j < PROCESSORS && (i + j) < sz; j++) {
            FORK unique(data, sz);
        }
        /* wait for them all */
        for (j = 0; j < PROCESSORS && (i + j) < sz; j++) {
            JOIN;
        }
    }

    return 0;
}
